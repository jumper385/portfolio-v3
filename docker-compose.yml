version: "3.3"

services:

  nginx:
    image: nginx:latest
    ports:
      - 80:80
      - 443:443
    restart: always
    volumes:
      - ./nginx/conf.d:/etc/nginx/conf.d
      - ./certbot/conf:/etc/letsencrypt
      - ./certbot/www:/var/www/certbot

  certbot:
    image: certbot/certbot:latest
    volumes:
      - ./certbot/conf:/etc/letsencrypt
      - ./certbot/www:/var/www/certbot
  # docker compose run --rm  certbot certonly --webroot --webroot-path /var/www/certbot/ --dry-run -d digism.xyz

  # db:
  #   build:
  #     context: ./db
  #     args:
  #       - PB_VERSION=0.14.1
  #   expose:
  #     - 8080
  #   ports:
  #     - 8543:8080
  #   volumes:
  #     - ./db/pb_data:/pb/pb_data

  # client:
  #   build: ./client
  #   ports:
  #     - 80:3000
  #   expose:
  #     - 80
  #   depends_on:
  #     - db
